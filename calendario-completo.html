
<!-- Tab Bar fissa in basso -->
<nav class="tab-bar">
    <a href="presenze.html" class="tab-bar-item" title="Presenze">
        <span>üìã</span>
        <span>Presenze</span>
    </a>
    <a href="allenamenti.html" class="tab-bar-item" title="Allenamenti">
        <span>üèãÔ∏è</span>
        <span>Allenamenti</span>
    </a>
    <a href="calendario.html" class="tab-bar-item" title="Calendario Partite">
        <span>‚öæ</span>
        <span>Partite</span>
    </a>
    <a href="area-personale.html" class="tab-bar-item" title="Profilo">
        <span>üë§</span>
        <span>Profilo</span>
    </a>
    <!-- Documento rimosso -->
</nav>
<style>
    .tab-bar {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        height: 64px;
        background: linear-gradient(135deg, #0a1929 0%, #1a365d 100%);
        display: flex;
        justify-content: space-around;
        align-items: center;
        box-shadow: 0 -2px 16px rgba(0,0,0,0.15);
        z-index: 9999;
        width: 100vw;
        max-width: 100vw;
        min-width: 0;
    }
    .tab-bar-item {
        flex: 1;
        text-align: center;
        color: #94a3b8;
        text-decoration: none;
        font-size: 1.1rem;
        font-weight: 600;
        padding: 0.5rem 0;
        transition: color 0.2s;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .tab-bar-item span:first-child {
        font-size: 1.5rem;
        margin-bottom: 0.2rem;
    }
    .tab-bar-item span:last-child {
        display: block;
    }
    .tab-bar-item:hover, .tab-bar-item.active {
        color: #f59e0b;
    }
    body { padding-bottom: 70px; }
    html, body {
        height: 100%;
        min-height: 100vh;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    @media (max-width: 420px) {
        .tab-bar {
            height: 48px;
            width: 100vw;
        }
        .tab-bar-item span:last-child {
            font-size: 0.7rem;
        }
        .tab-bar-item span:first-child {
            font-size: 1.2rem;
        }
    }
</style>
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario Completo - Lancers Baseball</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1a365d">
<link rel="apple-touch-icon" href="icons/icon-192x192.png"> <meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <script>
        // Ripristina sessione da localStorage se disponibile
        if (localStorage.getItem('authenticated') === 'true') {
            sessionStorage.setItem('authenticated', 'true');
            const savedPlayer = localStorage.getItem('playerData');
            if (savedPlayer) sessionStorage.setItem('playerData', savedPlayer);
        }
        if (sessionStorage.getItem('authenticated') !== 'true') {
            window.location.href = 'login.html';
        }
    </script>
    <nav class="navbar">
        <div class="nav-brand">
            <div class="baseball-ball logo"></div>
            <span class="team-name">Lancers Baseball</span>
        </div>
        <ul class="nav-links">
            <li><a href="index.html">üè† Home</a></li>
            <li><a href="calendario-completo.html" class="active">üìÖ Calendario</a></li>
            <li><a href="allenamenti.html">üèãÔ∏è Allenamenti</a></li>
            <li><a href="calendario.html">‚öæ Partite</a></li>
            <li><a href="presenze.html">üìã Presenze</a></li>
            <li><a href="documento.html">üìÑ Documento</a></li>
            <li><a href="area-personale.html">üë§ Area Personale</a></li>
        </ul>
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <main class="page-content">
        <div class="page-header">
            <h1>üìÖ Calendario Completo 2026</h1>
            <p>Allenamenti + Amichevoli + Campionato in un'unica vista</p>
        </div>

        <div class="calendar-container">
            
            <!-- GENNAIO 2026 -->
            <div class="calendar-section">
                <h2 class="section-title">üóìÔ∏è GENNAIO 2026</h2>
                <div class="matches-grid">
                    <div class="match-card training-tbd">
                        <div class="match-date">
                            <span class="day">03</span>
                            <span class="month">GEN</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê Da definire</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location tbd-badge">‚ùì Da definire</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">08</span>
                            <span class="month">GEN</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">13</span>
                            <span class="month">GEN</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">15</span>
                            <span class="month">GEN</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">20</span>
                            <span class="month">GEN</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">22</span>
                            <span class="month">GEN</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">27</span>
                            <span class="month">GEN</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">29</span>
                            <span class="month">GEN</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FEBBRAIO 2026 -->
            <div class="calendar-section">
                <h2 class="section-title">üóìÔ∏è FEBBRAIO 2026</h2>
                <div class="matches-grid">
                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">03</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card specific">
                        <div class="match-date">
                            <span class="day">04</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üéØ Sessione tecnica</span>
                            <h3 class="opponent">Allenamento Specifico</h3>
                            <span class="location specific-badge">üéØ Specifico</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">05</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card training-tbd">
                        <div class="match-date">
                            <span class="day">07</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê Da definire</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location tbd-badge">‚ùì Da definire</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">10</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card specific">
                        <div class="match-date">
                            <span class="day">11</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üéØ Sessione tecnica</span>
                            <h3 class="opponent">Allenamento Specifico</h3>
                            <span class="location specific-badge">üéØ Specifico</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">12</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card training-tbd">
                        <div class="match-date">
                            <span class="day">14</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê Da definire</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location tbd-badge">‚ùì Da definire</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">17</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card specific">
                        <div class="match-date">
                            <span class="day">18</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üéØ Sessione tecnica</span>
                            <h3 class="opponent">Allenamento Specifico</h3>
                            <span class="location specific-badge">üéØ Specifico</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">19</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card training-tbd">
                        <div class="match-date">
                            <span class="day">21</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê Da definire</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location tbd-badge">‚ùì Da definire</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">24</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card specific">
                        <div class="match-date">
                            <span class="day">25</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üéØ Sessione tecnica</span>
                            <h3 class="opponent">Allenamento Specifico</h3>
                            <span class="location specific-badge">üéØ Specifico</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">26</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card training-tbd">
                        <div class="match-date">
                            <span class="day">28</span>
                            <span class="month">FEB</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê Da definire</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location tbd-badge">‚ùì Da definire</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MARZO 2026 -->
            <div class="calendar-section">
                <h2 class="section-title">üóìÔ∏è MARZO 2026</h2>
                <div class="matches-grid">
                    <div class="match-card friendly">
                        <div class="match-date">
                            <span class="day">01</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üè† Domenica</span>
                            <h3 class="opponent">Amichevole Interna</h3>
                            <span class="location friendly-badge">‚úÖ Confermata</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">03</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card specific">
                        <div class="match-date">
                            <span class="day">04</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üéØ Sessione tecnica</span>
                            <h3 class="opponent">Allenamento Specifico</h3>
                            <span class="location specific-badge">üéØ Specifico</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">05</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card friendly">
                        <div class="match-date">
                            <span class="day">08</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üè† 10:00</span>
                            <h3 class="opponent">vs Castenaso/Phoenix</h3>
                            <span class="location friendly-badge">‚úÖ Casa</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">10</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card specific">
                        <div class="match-date">
                            <span class="day">11</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üéØ Sessione tecnica</span>
                            <h3 class="opponent">Allenamento Specifico</h3>
                            <span class="location specific-badge">üéØ Specifico</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">12</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card friendly">
                        <div class="match-date">
                            <span class="day">14</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">‚úàÔ∏è Sabato</span>
                            <h3 class="opponent">@ Fortitudo</h3>
                            <span class="location friendly-badge">‚úÖ Confermata</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">17</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card specific">
                        <div class="match-date">
                            <span class="day">18</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üéØ Sessione tecnica</span>
                            <h3 class="opponent">Allenamento Specifico</h3>
                            <span class="location specific-badge">üéØ Specifico</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">19</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card friendly">
                        <div class="match-date">
                            <span class="day">22</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üè† 10:30</span>
                            <h3 class="opponent">vs Fiorentina</h3>
                            <span class="location friendly-badge">‚úÖ Casa</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">24</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card specific">
                        <div class="match-date">
                            <span class="day">25</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üéØ Sessione tecnica</span>
                            <h3 class="opponent">Allenamento Specifico</h3>
                            <span class="location specific-badge">üéØ Specifico</span>
                        </div>
                    </div>

                    <div class="match-card training">
                        <div class="match-date">
                            <span class="day">26</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 19:30 - 21:30</span>
                            <h3 class="opponent">Allenamento</h3>
                            <span class="location training-badge">üèãÔ∏è Allenamento</span>
                        </div>
                    </div>

                    <div class="match-card friendly">
                        <div class="match-date">
                            <span class="day">29</span>
                            <span class="month">MAR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üè† Domenica</span>
                            <h3 class="opponent">vs Arezzo</h3>
                            <span class="location friendly-badge">‚úÖ Confermata</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- APRILE 2026 -->
            <div class="calendar-section">
                <h2 class="section-title">üóìÔ∏è APRILE 2026</h2>
                <div class="matches-grid">
                    <div class="match-card event">
                        <div class="match-date">
                            <span class="day">04</span>
                            <span class="month">APR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">ü•æ 09:00</span>
                            <h3 class="opponent">Trekking + Grigliata</h3>
                            <span class="location event-badge">üéâ Evento squadra</span>
                        </div>
                    </div>

                    <div class="match-card away">
                        <div class="match-date">
                            <span class="day">12</span>
                            <span class="month">APR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Health & Performance S.S.D</h3>
                            <span class="location away-badge">‚úàÔ∏è Trasferta - 1¬™ Giornata</span>
                        </div>
                    </div>

                    <div class="match-card away">
                        <div class="match-date">
                            <span class="day">19</span>
                            <span class="month">APR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Livorno 1940 Baseball</h3>
                            <span class="location away-badge">‚úàÔ∏è Trasferta - 2¬™ Giornata</span>
                        </div>
                    </div>

                    <div class="match-card home">
                        <div class="match-date">
                            <span class="day">26</span>
                            <span class="month">APR</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Longbridge 2000 B.C</h3>
                            <span class="location home-badge">üè† Casa - 2¬™ Giornata</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MAGGIO 2026 -->
            <div class="calendar-section">
                <h2 class="section-title">üóìÔ∏è MAGGIO 2026</h2>
                <div class="matches-grid">
                    <div class="match-card away">
                        <div class="match-date">
                            <span class="day">03</span>
                            <span class="month">MAG</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Colorno B.C.</h3>
                            <span class="location away-badge">‚úàÔ∏è Trasferta - 4¬™ Giornata</span>
                        </div>
                    </div>

                    <div class="match-card home">
                        <div class="match-date">
                            <span class="day">10</span>
                            <span class="month">MAG</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">A.S.D BSC Arezzo</h3>
                            <span class="location home-badge">üè† Casa - 4¬™ Giornata</span>
                        </div>
                    </div>

                    <div class="match-card home">
                        <div class="match-date">
                            <span class="day">17</span>
                            <span class="month">MAG</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Cali Roma XII</h3>
                            <span class="location home-badge">üè† Casa - 5¬™ Giornata</span>
                        </div>
                    </div>

                    <div class="match-card recovery">
                        <div class="match-date">
                            <span class="day">24</span>
                            <span class="month">MAG</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê TBD</span>
                            <h3 class="opponent">Da definire</h3>
                            <span class="location recovery-badge">üîÑ Eventuali Recuperi</span>
                        </div>
                    </div>

                    <div class="match-card away">
                        <div class="match-date">
                            <span class="day">30</span>
                            <span class="month">MAG</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 15:00</span>
                            <h3 class="opponent">Padule Baseball A.S.D</h3>
                            <span class="location away-badge">‚úàÔ∏è Trasferta - 7¬™ Giornata</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GIUGNO 2026 -->
            <div class="calendar-section">
                <h2 class="section-title">üóìÔ∏è GIUGNO 2026</h2>
                <div class="matches-grid">
                    <div class="match-card home">
                        <div class="match-date">
                            <span class="day">07</span>
                            <span class="month">GIU</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Health & Performance S.S.D</h3>
                            <span class="location home-badge">üè† Casa - Ritorno</span>
                        </div>
                    </div>

                    <div class="match-card home">
                        <div class="match-date">
                            <span class="day">14</span>
                            <span class="month">GIU</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Livorno 1940 Baseball</h3>
                            <span class="location home-badge">üè† Casa - Ritorno</span>
                        </div>
                    </div>

                    <div class="match-card away">
                        <div class="match-date">
                            <span class="day">21</span>
                            <span class="month">GIU</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Longbridge 2000 B.C</h3>
                            <span class="location away-badge">‚úàÔ∏è Trasferta - Ritorno</span>
                        </div>
                    </div>

                    <div class="match-card home">
                        <div class="match-date">
                            <span class="day">28</span>
                            <span class="month">GIU</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Colorno B.C.</h3>
                            <span class="location home-badge">üè† Casa - Ritorno</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LUGLIO 2026 -->
            <div class="calendar-section">
                <h2 class="section-title">üóìÔ∏è LUGLIO 2026</h2>
                <div class="matches-grid">
                    <div class="match-card away">
                        <div class="match-date">
                            <span class="day">05</span>
                            <span class="month">LUG</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">A.S.D BSC Arezzo</h3>
                            <span class="location away-badge">‚úàÔ∏è Trasferta - Ritorno</span>
                        </div>
                    </div>

                    <div class="match-card away">
                        <div class="match-date">
                            <span class="day">12</span>
                            <span class="month">LUG</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Cali Roma XII</h3>
                            <span class="location away-badge">‚úàÔ∏è Trasferta - Ritorno</span>
                        </div>
                    </div>

                    <div class="match-card locked recovery">
                        <div class="match-date">
                            <span class="day">19</span>
                            <span class="month">LUG</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üîí TBD</span>
                            <h3 class="opponent">Possibili Recuperi</h3>
                            <span class="location recovery-badge">üîÑ Da confermare</span>
                        </div>
                    </div>

                    <div class="match-card home">
                        <div class="match-date">
                            <span class="day">26</span>
                            <span class="month">LUG</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üïê 11:00</span>
                            <h3 class="opponent">Padule Baseball A.S.D</h3>
                            <span class="location home-badge">üè† Casa - Ritorno</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AGOSTO 2026 -->
            <div class="calendar-section">
                <h2 class="section-title">üóìÔ∏è AGOSTO 2026</h2>
                <div class="matches-grid">
                    <div class="match-card locked recovery">
                        <div class="match-date">
                            <span class="day">02</span>
                            <span class="month">AGO</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üîí TBD</span>
                            <h3 class="opponent">Possibili Recuperi</h3>
                            <span class="location recovery-badge">üîÑ Da confermare</span>
                        </div>
                    </div>

                    <div class="match-card locked playoff">
                        <div class="match-date">
                            <span class="day">22</span>
                            <span class="month">AGO</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üîí TBD</span>
                            <h3 class="opponent">Possibili Playoff/Playout</h3>
                            <span class="location" style="background: #ede9fe; color: #7c3aed;">üèÜ Post Season</span>
                        </div>
                    </div>

                    <div class="match-card locked playoff">
                        <div class="match-date">
                            <span class="day">29</span>
                            <span class="month">AGO</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üîí TBD</span>
                            <h3 class="opponent">Possibili Playoff/Playout</h3>
                            <span class="location" style="background: #ede9fe; color: #7c3aed;">üèÜ Post Season</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SETTEMBRE 2026 -->
            <div class="calendar-section">
                <h2 class="section-title">üóìÔ∏è SETTEMBRE 2026</h2>
                <div class="matches-grid">
                    <div class="match-card locked playoff">
                        <div class="match-date">
                            <span class="day">06</span>
                            <span class="month">SET</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üîí TBD</span>
                            <h3 class="opponent">Possibili Recuperi Playoff/Playout</h3>
                            <span class="location" style="background: #ede9fe; color: #7c3aed;">üèÜ Post Season</span>
                        </div>
                    </div>

                    <div class="match-card locked tournament">
                        <div class="match-date">
                            <span class="day">13</span>
                            <span class="month">SET</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üîí TBD</span>
                            <h3 class="opponent">Possibili Tornei</h3>
                            <span class="location" style="background: #fce7f3; color: #db2777;">üé™ Torneo</span>
                        </div>
                    </div>

                    <div class="match-card locked tournament">
                        <div class="match-date">
                            <span class="day">20</span>
                            <span class="month">SET</span>
                            <span class="year">2026</span>
                        </div>
                        <div class="match-info">
                            <span class="match-time">üîí TBD</span>
                            <h3 class="opponent">Possibili Tornei</h3>
                            <span class="location" style="background: #fce7f3; color: #db2777;">üé™ Torneo</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Legenda -->
        <div class="legend">
            <h3>Legenda</h3>
            <div class="legend-items">
                <div class="legend-item">
                    <span class="legend-color training-color"></span>
                    <span>üèÉ Allenamento</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color specific-color"></span>
                    <span>üéØ Specifico</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color friendly-color"></span>
                    <span>ü§ù Amichevole</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color event-color"></span>
                    <span>üéâ Evento</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color home-color"></span>
                    <span>üè† Casa</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color away-color"></span>
                    <span>‚úàÔ∏è Trasferta</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color recovery-color"></span>
                    <span>üîÑ Recuperi</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #8b5cf6;"></span>
                    <span>üèÜ Playoff/Playout</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #ec4899;"></span>
                    <span>üé™ Tornei</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #9ca3af;"></span>
                    <span>üîí Da confermare</span>
                </div>
            </div>
        </div>
    </main>
    <!-- Tab Bar fissa in basso -->
    <nav class="tab-bar">
        <a href="presenze.html" class="tab-bar-item" title="Presenze">
            <span>üìã</span>
            <span>Presenze</span>
        </a>
        <a href="allenamenti.html" class="tab-bar-item" title="Allenamenti">
            <span>üèãÔ∏è</span>
            <span>Allenamenti</span>
        </a>
        <a href="calendario.html" class="tab-bar-item" title="Calendario Partite">
            <span>‚öæ</span>
            <span>Partite</span>
        </a>
        <a href="area-personale.html" class="tab-bar-item" title="Profilo">
            <span>üë§</span>
            <span>Profilo</span>
        </a>
        <!-- Documento rimosso -->
    </nav>
    <style>
        .tab-bar {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            height: 64px;
            background: linear-gradient(135deg, #0a1929 0%, #1a365d 100%);
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -2px 16px rgba(0,0,0,0.15);
            z-index: 9999;
            width: 100vw;
            max-width: 100vw;
            min-width: 0;
        }
        .tab-bar-item {
            flex: 1;
            text-align: center;
            color: #94a3b8;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 600;
            padding: 0.5rem 0;
            transition: color 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .tab-bar-item span:first-child {
            font-size: 1.5rem;
            margin-bottom: 0.2rem;
        }
        .tab-bar-item span:last-child {
            display: block;
        }
        .tab-bar-item:hover, .tab-bar-item.active {
            color: #f59e0b;
        }
        body { padding-bottom: 70px; }
        html, body {
            height: 100%;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        @media (max-width: 420px) {
            .tab-bar {
                height: 48px;
                width: 100vw;
            }
            .tab-bar-item span:last-child {
                font-size: 0.7rem;
            }
            .tab-bar-item span:first-child {
                font-size: 1.2rem;
            }
        }
    </style>

    <footer style="margin-bottom: 80px;">
        <p>‚öæ ¬© 2026 Lancers Baseball Club - Serie B Federazione Italiana Baseball Softball</p>
        <p class="footer-motto">"Play Hard, Play Fair, Play Together" üèÜ</p>
        <button id="logoutBtn" class="footer-logout-btn">üö™ Logout</button>
    </footer>

    <!-- Modal Info Partita -->
    <div id="matchInfoModal" class="match-info-modal">
        <div class="match-info-modal-content">
            <div class="match-info-modal-header">
                <h2 id="matchInfoTitle">üìã Dettagli Partita</h2>
                <button class="match-info-modal-close" onclick="closeMatchInfoModal()">‚úï</button>
            </div>
            <div class="match-info-modal-body" id="matchInfoBody">
                <!-- Contenuto dinamico -->
            </div>
        </div>
    </div>

    <!-- Modal Gestione Trasporti -->
    <div id="trasportiModal" class="trasporti-modal">
        <div class="trasporti-modal-content">
            <div class="trasporti-modal-header">
                <h2 id="modalMatchTitle">üöó Gestione Trasporti</h2>
                <button class="trasporti-modal-close" onclick="closeTrasportiModal()">‚úï</button>
            </div>
            <div class="trasporti-modal-body" id="modalBody">
                <!-- Contenuto dinamico -->
            </div>
        </div>
    </div>

    <script src="script.js?v=44"></script>
    <script>
        // Database info partite
        const matchesInfo = {
            // AMICHEVOLI MARZO
            '01MAR': { opponent: 'Amichevole Interna', type: 'casa', time: '10:00', ritrovo: '09:30 al campo', luogo: 'Campo Lancers', note: 'Amichevole interna preparazione stagione' },
            '08MAR': { opponent: 'Castenaso/Phoenix', type: 'casa', time: '10:00', ritrovo: '09:30 al campo', luogo: 'Campo Lancers', note: 'Amichevole pre-stagione' },
            '14MAR': { opponent: 'Fortitudo Bologna', type: 'trasferta', time: '11:00', ritrovo: 'Da definire', luogo: 'Stadio Gianni Falchi, Bologna', maps: 'https://maps.google.com/?q=Stadio+Gianni+Falchi+Bologna' },
            '22MAR': { opponent: 'Fiorentina', type: 'trasferta', time: '11:00', ritrovo: 'Da definire', luogo: 'Campo Fiorentina Baseball, Firenze', maps: 'https://maps.google.com/?q=Fiorentina+Baseball+Firenze' },
            '29MAR': { opponent: 'A.S.D BSC Arezzo', type: 'casa', time: '11:00', ritrovo: '10:00 al campo', luogo: 'Campo Lancers' },
            // APRILE
            '12APR': { opponent: 'Health & Performance S.S.D', type: 'trasferta', time: '11:00', ritrovo: 'Da definire', luogo: 'Campo Health & Performance', maps: 'https://maps.google.com/?q=Health+Performance+Baseball' },
            '19APR': { opponent: 'Livorno 1940 Baseball', type: 'trasferta', time: '11:00', ritrovo: 'Da definire', luogo: 'Campo Livorno 1940', maps: 'https://maps.google.com/?q=Livorno+Baseball' },
            '26APR': { opponent: 'Longbridge 2000 B.C', type: 'casa', time: '11:00', ritrovo: '10:00 al campo', luogo: 'Campo Lancers' },
            // MAGGIO
            '03MAG': { opponent: 'Colorno B.C.', type: 'trasferta', time: '11:00', ritrovo: 'Da definire', luogo: 'Campo Colorno B.C.', maps: 'https://maps.google.com/?q=Colorno+Baseball+Parma' },
            '10MAG': { opponent: 'A.S.D BSC Arezzo', type: 'casa', time: '11:00', ritrovo: '10:00 al campo', luogo: 'Campo Lancers' },
            '17MAG': { opponent: 'Cali Roma XII', type: 'casa', time: '11:00', ritrovo: '10:00 al campo', luogo: 'Campo Lancers' },
            '30MAG': { opponent: 'Padule Baseball A.S.D', type: 'trasferta', time: '15:00', ritrovo: 'Da definire', luogo: 'Campo Padule Baseball', note: 'Sabato', maps: 'https://maps.google.com/?q=Padule+Baseball' },
            // GIUGNO
            '07GIU': { opponent: 'Health & Performance S.S.D', type: 'casa', time: '11:00', ritrovo: '10:00 al campo', luogo: 'Campo Lancers', note: 'Ritorno campionato' },
            '14GIU': { opponent: 'Livorno 1940 Baseball', type: 'casa', time: '11:00', ritrovo: '10:00 al campo', luogo: 'Campo Lancers' },
            '21GIU': { opponent: 'Longbridge 2000 B.C', type: 'trasferta', time: '11:00', ritrovo: 'Da definire', luogo: 'Campo Longbridge 2000', maps: 'https://maps.google.com/?q=Longbridge+2000+Baseball' },
            '28GIU': { opponent: 'Colorno B.C.', type: 'casa', time: '11:00', ritrovo: '10:00 al campo', luogo: 'Campo Lancers' },
            // LUGLIO
            '05LUG': { opponent: 'A.S.D BSC Arezzo', type: 'trasferta', time: '11:00', ritrovo: 'Da definire', luogo: 'Campo BSC Arezzo', maps: 'https://maps.google.com/?q=BSC+Arezzo+Baseball' },
            '12LUG': { opponent: 'Cali Roma XII', type: 'trasferta', time: '11:00', ritrovo: 'Da definire', luogo: 'Campo Cali Roma XII', maps: 'https://maps.google.com/?q=Cali+Roma+Baseball' },
            '26LUG': { opponent: 'Padule Baseball A.S.D', type: 'casa', time: '11:00', ritrovo: '10:00 al campo', luogo: 'Campo Lancers', note: 'Ritorno' }
        };
        
        // Aggiungi bottoni info alle card partite
        document.addEventListener('DOMContentLoaded', function() {
            addMatchInfoButtons();
            loadTrasportiForCalendar();
        });
        
        function addMatchInfoButtons() {
            const cards = document.querySelectorAll('.match-card');
            cards.forEach(card => {
                const matchInfo = card.querySelector('.match-info');
                const opponent = matchInfo?.querySelector('.opponent')?.textContent || '';
                const matchTime = matchInfo?.querySelector('.match-time')?.textContent || '';
                
                // Solo per partite (contiene vs, @, ‚úàÔ∏è, üè†)
                if (!opponent.includes('vs') && !opponent.includes('@') && !matchTime.includes('‚úàÔ∏è') && !matchTime.includes('üè†')) return;
                
                const dateSpan = card.querySelector('.match-date');
                const day = dateSpan?.querySelector('.day')?.textContent;
                const month = dateSpan?.querySelector('.month')?.textContent;
                if (!day || !month) return;
                
                const matchKey = `${day}${month}`;
                if (!matchesInfo[matchKey]) return;
                
                // Controlla se esiste gi√† il bottone
                if (matchInfo.querySelector('.match-info-btn')) return;
                
                const btn = document.createElement('button');
                btn.className = 'match-info-btn';
                btn.innerHTML = '‚ÑπÔ∏è Info';
                btn.onclick = (e) => {
                    e.stopPropagation();
                    openMatchInfoModal(matchKey);
                };
                matchInfo.appendChild(btn);
            });
        }
        
        function openMatchInfoModal(matchKey) {
            const info = matchesInfo[matchKey];
            if (!info) return;
            
            document.getElementById('matchInfoTitle').textContent = `üìã ${info.opponent}`;
            
            let html = `
                <div class="match-detail-row"><strong>üèüÔ∏è Tipo:</strong><span>${info.type === 'casa' ? 'üè† Casa' : '‚úàÔ∏è Trasferta'}</span></div>
                <div class="match-detail-row"><strong>‚öæ Orario:</strong><span>${info.time}</span></div>
                <div class="match-detail-row"><strong>üïê Ritrovo:</strong><span>${info.ritrovo}</span></div>
                <div class="match-detail-row"><strong>üìç Luogo:</strong><span>${info.luogo}</span></div>
            `;
            if (info.note) {
                html += `<div class="match-detail-row"><strong>üìù Note:</strong><span>${info.note}</span></div>`;
            }
            if (info.maps) {
                html += `<a href="${info.maps}" target="_blank" class="match-map-btn">üìç Apri Maps</a>`;
            }
            
            document.getElementById('matchInfoBody').innerHTML = html;
            document.getElementById('matchInfoModal').classList.add('open');
        }
        
        function closeMatchInfoModal() {
            document.getElementById('matchInfoModal').classList.remove('open');
        }
        
        // Lista giocatori per mapping
        const playersList = [
            { number: 0, name: 'Niccol√≤ Bucci' },
            { number: 1, name: 'Alessandro Ferrini' },
            { number: 3, name: 'Ettore Della Nave' },
            { number: 4, name: 'Giovanni G. Beudean' },
            { number: 6, name: 'Simone Geri' },
            { number: 7, name: 'Silvano Albano' },
            { number: 8, name: 'Tommaso Panichi' },
            { number: 12, name: 'Francesco Grassi' },
            { number: 14, name: 'Leonardo Scarpulla' },
            { number: 19, name: 'Simone Baratella' },
            { number: 22, name: 'Giuseppe G. Grado' },
            { number: 24, name: 'Guido Nannucci' },
            { number: 25, name: 'Lorenzo Scarpulla' },
            { number: 32, name: 'Filippo Anichini' },
            { number: 38, name: 'Antonio Parrini' },
            { number: 59, name: 'Lapo Biondi' },
            { number: 77, name: 'Cosimo Rinaldi' },
            { number: 89, name: 'Daniele Silvestri' },
            { number: 90, name: 'Alessandro Rrethatori' },
            { number: 98, name: 'Francesco Paperini' },
            { number: 99, name: 'Victor Vergara' }
        ];
        
        function getPlayerName(num) {
            const p = playersList.find(pl => pl.number == num);
            return p ? p.name : `#${num}`;
        }
        
        // Mappa date partite trasferta
        const matchDateMap = {
            '2026-03-14': { day: '14', month: 'MAR' },
            '2026-03-22': { day: '22', month: 'MAR' },
            '2026-04-04': { day: '04', month: 'APR' },
            '2026-04-19': { day: '19', month: 'APR' },
            '2026-05-03': { day: '03', month: 'MAG' },
            '2026-05-30': { day: '30', month: 'MAG' },
            '2026-06-21': { day: '21', month: 'GIU' },
            '2026-07-05': { day: '05', month: 'LUG' },
            '2026-07-12': { day: '12', month: 'LUG' }
        };
        
        const FIREBASE_URL = 'https://lancersareariservata-default-rtdb.europe-west1.firebasedatabase.app';
        let currentModalMatchId = null;
        let currentModalTrasporti = { vehicles: [] };
        const currentPlayerData = JSON.parse(sessionStorage.getItem('playerData') || '{}');
        const isAdmin = [25, 19, 38, 6, 'ADMIN'].includes(currentPlayerData.number);
        
        async function loadTrasportiForCalendar() {
            try {
                const response = await fetch(`${FIREBASE_URL}/trasporti.json`);
                const allTrasporti = await response.json() || {};
                
                // Trova card trasferta nel calendario completo
                const cards = document.querySelectorAll('.match-card');
                cards.forEach(card => {
                    // Controlla se √® una trasferta (contiene ‚úàÔ∏è o "@ ")
                    const matchInfo = card.querySelector('.match-info');
                    const opponent = matchInfo?.querySelector('.opponent')?.textContent || '';
                    const matchTime = matchInfo?.querySelector('.match-time')?.textContent || '';
                    
                    if (!matchTime.includes('‚úàÔ∏è') && !opponent.includes('@')) return;
                    
                    const dateSpan = card.querySelector('.match-date');
                    const day = dateSpan?.querySelector('.day')?.textContent;
                    const month = dateSpan?.querySelector('.month')?.textContent;
                    if (!day || !month) return;
                    
                    // Trova matchId corrispondente
                    let matchId = null;
                    for (const [id, dateInfo] of Object.entries(matchDateMap)) {
                        if (dateInfo.day === day && dateInfo.month === month) {
                            matchId = id;
                            break;
                        }
                    }
                    
                    if (!matchId) return;
                    
                    // Aggiungi sezione trasporti se non esiste
                    if (!matchInfo.querySelector('.trasporti-mini')) {
                        const data = allTrasporti[matchId];
                        if (data && data.vehicles && data.vehicles.length > 0) {
                            const totalPeople = data.vehicles.reduce((sum, v) => {
                                let c = (v.driver || v.driverName) ? 1 : 0;
                                c += (v.passengerNames || v.passengers || []).filter(p => p && p.trim()).length;
                                return sum + c;
                            }, 0);
                            const totalSeats = data.vehicles.reduce((sum, v) => sum + v.seats, 0);
                            
                            matchInfo.insertAdjacentHTML('beforeend', `
                                <div class="trasporti-mini" style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px dashed rgba(0,0,0,0.1);">
                                    <span style="font-size: 0.8rem;">üöó ${data.vehicles.length} veicoli ‚Ä¢ ${totalPeople}/${totalSeats} posti</span>
                                    <button onclick="event.stopPropagation(); openTrasportiModal('${matchId}')" 
                                            style="margin-left: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                        Gestisci
                                    </button>
                                </div>
                            `);
                        } else {
                            matchInfo.insertAdjacentHTML('beforeend', `
                                <div class="trasporti-mini" style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px dashed rgba(0,0,0,0.1);">
                                    <span style="font-size: 0.8rem; color: #94a3b8;">üöó Nessun veicolo</span>
                                    <button onclick="event.stopPropagation(); openTrasportiModal('${matchId}')" 
                                            style="margin-left: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                        Aggiungi
                                    </button>
                                </div>
                            `);
                        }
                    }
                });
            } catch (e) {
                console.error('Errore caricamento trasporti:', e);
            }
        }
        
        function openTrasportiModal(matchId) {
            currentModalMatchId = matchId;
            document.getElementById('trasportiModal').classList.add('open');
            document.getElementById('modalMatchTitle').textContent = 'üöó Trasporti - ' + getMatchName(matchId);
            loadModalTrasporti(matchId);
        }
        
        function closeTrasportiModal() {
            document.getElementById('trasportiModal').classList.remove('open');
            currentModalMatchId = null;
            location.reload(); // Ricarica per aggiornare i dati
        }
        
        function getMatchName(matchId) {
            const names = {
                '2026-03-14': 'Fortitudo Bologna',
                '2026-03-22': 'Fiorentina',
                '2026-04-04': 'Health & Performance',
                '2026-04-19': 'Livorno 1940',
                '2026-05-03': 'Colorno B.C.',
                '2026-05-30': 'Padule Baseball',
                '2026-06-21': 'Longbridge 2000',
                '2026-07-05': 'BSC Arezzo',
                '2026-07-12': 'Cali Roma XII'
            };
            return names[matchId] || matchId;
        }
        
        async function loadModalTrasporti(matchId) {
            const body = document.getElementById('modalBody');
            body.innerHTML = '<p style="text-align:center; color:#94a3b8;">‚è≥ Caricamento...</p>';
            
            try {
                const response = await fetch(`${FIREBASE_URL}/trasporti/${matchId}.json`);
                const data = await response.json();
                currentModalTrasporti = data && data.vehicles ? data : { vehicles: [] };
                renderModalContent();
            } catch (e) {
                console.error('Errore:', e);
                currentModalTrasporti = { vehicles: [] };
                renderModalContent();
            }
        }
        
        function getCurrentPlayerIdentifier() {
            return String(currentPlayerData.number);
        }
        
        function isPersonInAnyVehicle(personId) {
            for (const v of currentModalTrasporti.vehicles) {
                if (String(v.driver) === String(personId)) return true;
                if (v.driverName && v.driverName.includes(`#${personId}`)) return true;
                if (v.passengers) {
                    for (let i = 0; i < v.passengers.length; i++) {
                        if (String(v.passengers[i]) === String(personId)) return true;
                        if (v.passengerNames && v.passengerNames[i] && v.passengerNames[i].includes(`#${personId}`)) return true;
                    }
                }
            }
            return false;
        }
        
        function renderModalContent() {
            const body = document.getElementById('modalBody');
            const myId = getCurrentPlayerIdentifier();
            const amIAssigned = isPersonInAnyVehicle(myId);
            
            const assignedPeople = new Set();
            currentModalTrasporti.vehicles.forEach(v => {
                if (v.driver) assignedPeople.add(String(v.driver));
                (v.passengers || []).forEach(p => { if (p) assignedPeople.add(String(p)); });
            });
            
            const missingPlayers = playersList.filter(p => !assignedPeople.has(String(p.number)));
            
            let html = '';
            
            if (missingPlayers.length > 0) {
                html += `<div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 1rem; margin-bottom: 1rem;">
                    <h4 style="color: #ef4444; margin: 0 0 0.5rem 0; font-size: 0.95rem;">‚ö†Ô∏è Senza posto (${missingPlayers.length}):</h4>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                        ${missingPlayers.map(p => `<span style="background: rgba(239, 68, 68, 0.2); color: #fca5a5; padding: 0.25rem 0.6rem; border-radius: 20px; font-size: 0.8rem;">#${p.number} ${p.name.split(' ')[0]}</span>`).join('')}
                    </div>
                </div>`;
            } else if (currentModalTrasporti.vehicles.length > 0) {
                html += `<p style="color: #22c55e; margin-bottom:1rem;">‚úÖ Tutti i giocatori della lista hanno un posto!</p>`;
            }
            
            if (currentModalTrasporti.vehicles.length === 0) {
                html += '<p style="text-align:center; color:#94a3b8; padding:2rem;">Nessun veicolo configurato.</p>';
            } else {
                currentModalTrasporti.vehicles.forEach((v, vIdx) => {
                    const driverName = v.driverName || (v.driver ? getPlayerName(v.driver) : null);
                    const hasDriver = v.driver || v.driverName;
                    const isMyDriver = String(v.driver) === myId || (v.driverName && v.driverName.includes(`#${myId}`));
                    
                    html += `<div style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; padding: 1rem; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <span style="font-size: 1.5rem;">üöó</span>
                                <div>
                                    <h4 style="margin: 0; color: white; font-size: 1rem;">${driverName || 'Autista da assegnare'}</h4>
                                    <span style="color: #94a3b8; font-size: 0.85rem;">${v.seats} posti totali</span>
                                </div>
                            </div>
                            ${isAdmin ? `<button onclick="removeVehicleModal(${vIdx})" style="background:rgba(239,68,68,0.2);color:#ef4444;border:none;padding:0.5rem 1rem;border-radius:8px;cursor:pointer;">üóëÔ∏è</button>` : ''}
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 0.5rem;">
                            ${renderDriverSeatCC(v, vIdx, hasDriver, driverName, myId, amIAssigned)}
                            ${renderPassengerSeatsCC(v, vIdx, myId, amIAssigned)}
                        </div>
                        
                        ${v.notes ? `<div style="margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid rgba(255,255,255,0.1);"><span style="color: #94a3b8; font-size: 0.85rem; font-style: italic;">üìù ${v.notes}</span></div>` : ''}
                    </div>`;
                });
            }
            
            html += `<div style="background: rgba(34, 197, 94, 0.1); border: 2px dashed rgba(34, 197, 94, 0.3); border-radius: 12px; padding: 1.5rem; text-align: center; margin-top: 1rem;">
                <h4 style="color: #22c55e; margin: 0 0 1rem 0;">‚ûï Aggiungi il tuo veicolo</h4>
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <select id="newVehicleSeats" style="padding: 0.75rem 1rem; border-radius: 8px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: white;">
                        ${[4,5,6,7,8,9,10,11].map(n => `<option value="${n}">${n} posti</option>`).join('')}
                    </select>
                    <button onclick="addMyVehicle()" style="padding: 0.75rem 1rem; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üöó Aggiungo la mia auto</button>
                </div>
            </div>`;
            
            body.innerHTML = html;
        }
        
        function renderDriverSeatCC(v, vIdx, hasDriver, driverName, myId, amIAssigned) {
            const isMyDriver = String(v.driver) === myId || (v.driverName && v.driverName.includes(`#${myId}`));
            const baseStyle = 'padding: 0.6rem; text-align: center; border-radius: 8px; font-size: 0.85rem;';
            
            if (hasDriver) {
                if (isMyDriver) {
                    return `<div style="${baseStyle} background: rgba(234, 179, 8, 0.2); border: 2px solid rgba(234, 179, 8, 0.5); color: #eab308; cursor: pointer;" onclick="leaveDriverSeat(${vIdx})">
                        üöó ${driverName}<br><small>(clicca per lasciare)</small>
                    </div>`;
                } else {
                    return `<div style="${baseStyle} background: rgba(59, 130, 246, 0.2); border: 2px solid rgba(59, 130, 246, 0.5); color: #3b82f6;">üöó ${driverName}</div>`;
                }
            } else {
                if (amIAssigned) {
                    return `<div style="${baseStyle} background: rgba(0,0,0,0.3); border: 2px dashed rgba(59, 130, 246, 0.3); color: #94a3b8; opacity: 0.5;">üöó Libero</div>`;
                } else {
                    return `<div style="${baseStyle} background: rgba(0,0,0,0.3); border: 2px dashed rgba(59, 130, 246, 0.3); color: #94a3b8; cursor: pointer;" onclick="takeDriverSeat(${vIdx})">üöó Libero<br><small>(clicca per guidare)</small></div>`;
                }
            }
        }
        
        function renderPassengerSeatsCC(v, vIdx, myId, amIAssigned) {
            let html = '';
            const maxPassengers = v.seats - 1;
            const passengers = v.passengers || [];
            const passengerNames = v.passengerNames || [];
            const baseStyle = 'padding: 0.6rem; text-align: center; border-radius: 8px; font-size: 0.85rem;';
            
            for (let i = 0; i < maxPassengers; i++) {
                const passengerId = passengers[i];
                const passengerName = passengerNames[i] || (passengerId ? getPlayerName(passengerId) : null);
                const isMySeat = String(passengerId) === myId || (passengerName && passengerName.includes(`#${myId}`));
                
                if (passengerName) {
                    if (isMySeat) {
                        html += `<div style="${baseStyle} background: rgba(234, 179, 8, 0.2); border: 2px solid rgba(234, 179, 8, 0.5); color: #eab308; cursor: pointer;" onclick="leavePassengerSeat(${vIdx}, ${i})">
                            ${passengerName}<br><small>(clicca per lasciare)</small>
                        </div>`;
                    } else if (isAdmin) {
                        html += `<div style="${baseStyle} background: rgba(34, 197, 94, 0.2); border: 2px solid rgba(34, 197, 94, 0.5); color: #22c55e; cursor: pointer;" onclick="removePassengerAdmin(${vIdx}, ${i})">
                            ${passengerName}<br><small>(rimuovi)</small>
                        </div>`;
                    } else {
                        html += `<div style="${baseStyle} background: rgba(34, 197, 94, 0.2); border: 2px solid rgba(34, 197, 94, 0.5); color: #22c55e;">${passengerName}</div>`;
                    }
                } else {
                    if (amIAssigned) {
                        html += `<div style="${baseStyle} background: rgba(0,0,0,0.3); border: 2px dashed rgba(59, 130, 246, 0.3); color: #94a3b8; opacity: 0.5;">Libero</div>`;
                    } else {
                        html += `<div style="${baseStyle} background: rgba(0,0,0,0.3); border: 2px dashed rgba(59, 130, 246, 0.3); color: #94a3b8; cursor: pointer;" onclick="takePassengerSeat(${vIdx}, ${i})">Libero<br><small>(clicca per salire)</small></div>`;
                    }
                }
            }
            
            return html;
        }
        
        async function takeDriverSeat(vIdx) {
            const myId = getCurrentPlayerIdentifier();
            if (isPersonInAnyVehicle(myId)) {
                alert('Sei gi√† assegnato a un veicolo! Lascia prima il posto attuale.');
                return;
            }
            
            const player = playersList.find(p => p.number == myId);
            const myName = player ? `#${player.number} ${player.name}` : `#${myId}`;
            
            currentModalTrasporti.vehicles[vIdx].driver = myId;
            currentModalTrasporti.vehicles[vIdx].driverName = myName;
            
            await saveModalTrasporti();
            renderModalContent();
        }
        
        async function leaveDriverSeat(vIdx) {
            currentModalTrasporti.vehicles[vIdx].driver = '';
            currentModalTrasporti.vehicles[vIdx].driverName = '';
            
            await saveModalTrasporti();
            renderModalContent();
        }
        
        async function takePassengerSeat(vIdx, slotIdx) {
            const myId = getCurrentPlayerIdentifier();
            if (isPersonInAnyVehicle(myId)) {
                alert('Sei gi√† assegnato a un veicolo! Lascia prima il posto attuale.');
                return;
            }
            
            const player = playersList.find(p => p.number == myId);
            const myName = player ? `#${player.number} ${player.name}` : `#${myId}`;
            
            if (!currentModalTrasporti.vehicles[vIdx].passengers) {
                currentModalTrasporti.vehicles[vIdx].passengers = [];
            }
            if (!currentModalTrasporti.vehicles[vIdx].passengerNames) {
                currentModalTrasporti.vehicles[vIdx].passengerNames = [];
            }
            
            currentModalTrasporti.vehicles[vIdx].passengers[slotIdx] = myId;
            currentModalTrasporti.vehicles[vIdx].passengerNames[slotIdx] = myName;
            
            await saveModalTrasporti();
            renderModalContent();
        }
        
        async function leavePassengerSeat(vIdx, slotIdx) {
            currentModalTrasporti.vehicles[vIdx].passengers[slotIdx] = '';
            currentModalTrasporti.vehicles[vIdx].passengerNames[slotIdx] = '';
            
            await saveModalTrasporti();
            renderModalContent();
        }
        
        async function removePassengerAdmin(vIdx, slotIdx) {
            if (!isAdmin) return;
            currentModalTrasporti.vehicles[vIdx].passengers[slotIdx] = '';
            currentModalTrasporti.vehicles[vIdx].passengerNames[slotIdx] = '';
            
            await saveModalTrasporti();
            renderModalContent();
        }
        
        async function removeVehicleModal(vIdx) {
            if (!isAdmin) return;
            if (!confirm('Rimuovere questo veicolo?')) return;
            
            currentModalTrasporti.vehicles.splice(vIdx, 1);
            
            await saveModalTrasporti();
            renderModalContent();
        }
        
        async function addMyVehicle() {
            const seats = parseInt(document.getElementById('newVehicleSeats').value);
            const myId = getCurrentPlayerIdentifier();
            const player = playersList.find(p => p.number == myId);
            const myName = player ? `#${player.number} ${player.name}` : `#${myId}`;
            
            const alreadyDriver = currentModalTrasporti.vehicles.some(v => 
                String(v.driver) === myId || (v.driverName && v.driverName.includes(`#${myId}`))
            );
            
            if (alreadyDriver) {
                alert('Sei gi√† autista di un altro veicolo!');
                return;
            }
            
            currentModalTrasporti.vehicles.forEach(v => {
                if (v.passengers) {
                    v.passengers = v.passengers.map((p, i) => {
                        if (String(p) === myId || (v.passengerNames && v.passengerNames[i] && v.passengerNames[i].includes(`#${myId}`))) {
                            if (v.passengerNames) v.passengerNames[i] = '';
                            return '';
                        }
                        return p;
                    });
                }
            });
            
            const maxId = currentModalTrasporti.vehicles.reduce((max, v) => Math.max(max, v.id || 0), 0);
            currentModalTrasporti.vehicles.push({
                id: maxId + 1,
                seats: seats,
                driver: myId,
                driverName: myName,
                passengers: [],
                passengerNames: [],
                notes: ''
            });
            
            await saveModalTrasporti();
            renderModalContent();
        }
        
        async function saveModalTrasporti() {
            if (!currentModalMatchId) return;
            
            try {
                await fetch(`${FIREBASE_URL}/trasporti/${currentModalMatchId}.json`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(currentModalTrasporti)
                });
            } catch (e) {
                console.error('Errore salvataggio:', e);
                alert('Errore nel salvataggio. Riprova.');
            }
        }
    </script>
    
    <style>
        /* Modal Trasporti */
        .trasporti-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow-y: auto;
            padding: 1rem;
        }
        .trasporti-modal.open { display: block; }
        .trasporti-modal-content {
            max-width: 800px;
            margin: 2rem auto;
            background: linear-gradient(135deg, #0f2847 0%, #1e3a5f 100%);
            border-radius: 16px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            overflow: hidden;
        }
        .trasporti-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }
        .trasporti-modal-header h2 {
            margin: 0;
            color: #60a5fa;
            font-size: 1.2rem;
        }
        .trasporti-modal-close {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.3rem;
        }
        .trasporti-modal-body {
            padding: 1.5rem;
        }

        /* Modal Info Partita */
        .match-info-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow-y: auto;
            padding: 1rem;
        }
        .match-info-modal.open { display: block; }
        .match-info-modal-content {
            max-width: 600px;
            margin: 2rem auto;
            background: linear-gradient(135deg, #0f2847 0%, #1e3a5f 100%);
            border-radius: 16px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            overflow: hidden;
        }
        .match-info-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }
        .match-info-modal-header h2 {
            margin: 0;
            color: #60a5fa;
            font-size: 1.2rem;
        }
        .match-info-modal-close {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.3rem;
        }
        .match-info-modal-body {
            padding: 1.5rem;
        }
        .match-detail-row {
            display: flex;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .match-detail-row:last-child { border-bottom: none; }
        .match-detail-row strong {
            min-width: 120px;
            color: #60a5fa;
        }
        .match-detail-row span {
            color: #e2e8f0;
        }
        .match-info-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            background: rgba(59, 130, 246, 0.3);
            color: #60a5fa;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 0.5rem;
            transition: all 0.2s;
        }
        .match-info-btn:hover {
            background: rgba(59, 130, 246, 0.5);
        }
        .match-map-btn {
            display: inline-block;
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 1rem;
        }
    </style>
</body>
</html>
